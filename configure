#!/bin/sh
BUILDINFO=stablehlo-hs.buildinfo

# Setup .buildinfo
echo "--Autogenerated file. $(date)" > ${BUILDINFO} 

# echo "cxx-options:" >> ${BUILDINFO}
# echo "$(llvm-config --cxxflags | sed -e 's/-I[\/A-Za-z0-9.]* //g' | sed -e 's/ *//' | sed -e 's/  */\n/g' | sed -e 's/^/    /g')" >> ${BUILDINFO}

# echo "cc-options:" >> ${BUILDINFO}
# echo "$(llvm-config --cflags | sed -e 's/-I[\/A-Za-z0-9.]* //g' | sed -e 's/ *//' | sed -e 's/  */\n/g' | sed -e 's/^/    /g')" >> ${BUILDINFO}

# echo "ld-options:" >> ${BUILDINFO}
# echo "$(llvm-config --ldflags | sed -e 's/-L[\/A-Za-z0-9.]* //g' | sed -e 's/ *//' | sed -e 's/  */\n/g' | sed -e 's/^/    /g')" >> ${BUILDINFO}

# echo "extra-lib-dirs: $(llvm-config --libdir)" >> ${BUILDINFO}
# echo "$(llvm-config --libdir | sed -e 's/  */\n/g' | sed -e 's/^/    /g')" >> ${BUILDINFO}

# echo "include-dirs: $(llvm-config --includedir)" >> ${BUILDINFO}
# echo "$(llvm-config --includedir | sed -e 's/  */\n/g' | sed -e 's/^/    /g')" >> ${BUILDINFO}

# Setup symlink to *.td files
ln -sf $(llvm-config --includedir)

# echo "PLEASE FILL IN DIRECTORY TO stablehlo (example: /foo/bar/stablehlo) and comment this line out" && echo "buildable: False" >> ${BUILDINFO}
ln -sf /home/cha0s/stablehlo
